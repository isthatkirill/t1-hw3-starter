## ДЗ №3 Т1 Холдинг

### Модули приложения

Приложение включает в себя два модуля:

1. http-logger-spring-boot-starter - стартер, предоставляющий бины и автоматическую конфигурацию для логрирования http-запросов
2. http-logger-sample-app - springboot-приложение с примером использования стартера

### Функциональность стартера

Стартер содержит следующие классы:

* `LoggerFilter` - наследник `OncePerRequestFilter`, позволяет логировать http-запросы и http-ответы
* `LoggerProperties` - служит для конфигурации работы `LoggerFilter`
* `LoggerAutoConfiguration` - служит для автоматической конфигурации бинов в приложении, которое использует стартер

Настроить логирование можно с помощью следующих параметров:
* `http.logging.enabled=true` - включение/выключение логирования (по умолчанию включено)
* `http.logging.methods=[ 'GET', 'POST', ... ]` - список http-методов, которые нужно логировать (по умолчанию все)

Помимо этого, в стартере также настроен формат записи логов в файл и консоль. Он будет использоваться по умолчанию, если не будет
переопределен в приложении, которое использует стартер. Конфигурация содержится в файле `logback.xml`. Примеры логов представлены в [этом файле](https://github.com/isthatkirill/t1-hw3-starter/blob/main/logs/app.log).

Стартер был покрыт юнит-тестами с использованием Mockito для отслеживания выполнения методов `LoggerFilter` и расширения
`OutputCaptureExtension` для захвата и проверки вывода логов при различных параметрах `LoggerProperties`.

### Функциональность приложения, использующего стартер

Для проверки корректности работы стартера было написано небольшое приложение с демонстрационной сущностью SampleUser. Взаимодействие
с приложением доступно по эндпоинтам:

- POST `/sample/user` - добавление пользователя
- GET `/sample/user?age={age}&name={name}?surname={surname}` - получение пользователя
- PATCH `/sample/user/{name}` - обновление пользователя
- DELETE `/sample/user/{name}` - удаление пользователя
- GET `/sample/user/exception` - преднамеренный выброс исключения для демонстрации возможности стартера логировать ошибки при обработке http-запросов

Примеры http-запросов есть в [postman-коллекции](https://github.com/isthatkirill/t1-hw3-starter/blob/main/postman/requests.json).

Приложение также покрыто юнит-тестами для проверки корректности работы стартера.

### Инструкция по запуску

1. Склонируйте репозиторий `git clone https://github.com/isthatkirill/t1-hw3-starter.git`

2. Перейдите в директорию с проектом `cd t1-hw3-starter`

3. Соберите все модули приложения `mvn clean install`

4. Перейдите в директорию с приложением-примером использования стартера `cd http-logger-sample-app`

5. Запустите приложение `mvn spring-boot:run`. Логи доступны в консоли или в папке `logs` в корневой директории.

### Используемые технологии и библиотеки

- Spring Boot
- Lombok
- JUnit 5
- Mockito
- Maven
